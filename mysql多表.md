##数据库的设计
一、多表之间的关系
    1.分类:
        1)一对一(了解):
            *如:任何身份证
            *分析:一个人只能有一个身份证,一个身份证只能对应一个人
        2)一对多(多对一)
            *如:部门和员工
            *分析:一个部门有多个员工,一个员工只能对应一个部门
        3)多对多:
            *如:学生和课程
            *分析:一个学生可以选择很多门课程,一个课程也可以被很多学生选择
    2.实现关系:
        1.一对多(多对一):
            *如:部门和员工
            *实现方式:在多的一方建立外键,指向一的一方的主键
        2.多对多:
            *如:学生和课程
            *实现方式:多对多关系实现需要借助第三张中间表,中间表至少包含两个字段,这两个字段作为第三张表的外键,分别指向两张表的主键

        3.一对一:
            *如:学生和身份证
            *实现方式:一对一关系实现,可以在任意一方添加唯一外键指向另一方的主键

二、数据库设计的范式
    *概念:设计数据库时,需要遵循的一些规范。要遵循后边的范式要求,必须先遵循前边的所有范式要求
        设计关系数据库时,遵从不同的规范要求,设计出合理地关系型数据库,这些不同的规范要求被称为不同的范式,各种范式呈递次规范,越高的范式数据库冗余越小。
        目前关系数据库有六种范式:第一范式(1NF)、第二范式(2NF)、第三范式(3NF)、巴斯-科德范式(BCNF)、第四范式(4NF)和第五范式(5NF)

    *分类:
        1.第一范式(1NF):每一列都是不可分割的原子数据项
        2.第二范式(2NF):在1NF的基础上,非码属性必须完全依赖于候选码(在1NF基础上消除非主属性对主码的部分函数依赖)
            *几个概念:
                (1)函数依赖:A--->B,如果通过A属性(属性组)的值,可以确定唯一B属性的值。则称B依赖于A
                    例如:学号--->姓名。 (学号,课程名称)--->分数
                (2)完全函数依赖:A--->B,如果A是一个属性组,则B属性值的确定需要依赖于A属性组中所有的属性值
                    例如:(学号,课程名)--->分数
                (3)部分函数依赖:A--->B,如果A是一个属性组,则B属性值的确定只需要依赖于A属性组中某一些值即可。
                    例如:(学号,课程名)--->姓名
                (4)传递函数依赖:A--->B,B--->C,如果通过A属性(属性组)的值,可以确定唯一B属性的值,在通过B属性(属性组)的值可以确定唯一C属性的值,则称C传递函数依赖于A
                    例如:学号--->系名,系名--->系主任
                (5)码:如果一张表中,一个属性或属性组,被其他所有的属性所完全依赖,则称这个属性(属性组)为该表的码
                    例如:该表中码为:(学号,课程名称)
                    *主属性:码主属性组中的所有属性
                    *非主属性:除过码属性组的属性

        3.第三范式(3NF):在2NF基础上,任何非主属性不依赖于其它非主属性(在2NF基础上消除传递依赖)


*笛卡尔积:
    *有两个集合A,B,取这两个集合的所有的组合情况
    *要完成多表查询,需要消除无用的数据
三、多表查询的分类
    1.内连接查询:
        1)隐式内连接:使用where条件消除无用数据
        2)显式内连接:[inner]--表示可写可不写
            *语法:select 字段列表 from 表名1 [inner] join 表名2 on 条件
            *例如:*select * from emp inner join dept on emp.dept_id = dept.id
        3)内连接查询:
            1、从那些表中查询数据
            2、条件是什么
            3、查询哪些字段
    2.外连接查询:
        1)左外连接:
            *语法:select 字段列表 from 表1 left [outer] join 表2 on 条件
            *查询的是左表所有数据以及其交集部分
        2)右外连接:
            *语法:select 字段列表 from 表1 right [outer] join 表2 on 条件
            *查询的是右表所有数据以及其交集部分
    3.子查询:
        *概念:查询中嵌套查询,称嵌套查询为子查询
        *子查询不同情况
        1)子查询的结果是单行单列的:
            *子查询可以作为条件,使用运算符去判断。运算符:> >= < <= =
            *
            -- 查询员工工资小于平均工资的人
            select * from emp where emp.galary < (select avg(galary) from emp);
        2)子查询的结果是多行单列的:
            *子查询可以作为条件,使用运算符in来判断
            -- 查询财务部和市场部所有的员工信息
            select * from emp where dept_id in (select id from dept where name = '财务部' or name = '市场部')
        3)子查询的结果是多行多列的:
            *子查询可以作为一张虚拟表
            -- 查询员工的入职日期是2011-11-11日之后的员工信息和部门信息
            select * from dept t1 , (select * from emp where emp.join_date > '2011-11-11' ) t2
            where t1.id = t2.dept_id
            -- 普通内连接
            select * from emp t1,dept t2 where t1.dept_id = t2.id and t1.join_date > '2011-11-11';
